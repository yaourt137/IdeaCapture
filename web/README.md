# IdeaCapture Web æŸ¥çœ‹å™¨

ç½‘é¡µç«¯æŸ¥çœ‹å™¨ï¼Œç”¨äºæŸ¥çœ‹ Supabase ä¸­å­˜å‚¨çš„æƒ³æ³•ã€‚

## âœ¨ ç‰¹æ€§

- âœ… **è‡ªåŠ¨é…ç½®åŠ è½½**: ä»ç¯å¢ƒå˜é‡è¯»å– Supabase é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥
- âœ… **å®‰å…¨**: ä½¿ç”¨ Publishable Key è€Œé Service Role Key
- âœ… **å®æ—¶æœç´¢**: æ”¯æŒæŒ‰æ ‡é¢˜ã€å†…å®¹ã€æ ‡ç­¾æœç´¢
- âœ… **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯
- âœ… **é›¶é…ç½®**: å¯åŠ¨å³ç”¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®ç¯å¢ƒå˜é‡

ç¡®ä¿ `IdeaCapture/IdeaCapture/.env` æ–‡ä»¶åŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```bash
# Supabase é…ç½®
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_PUBLISHABLE_KEY=sb_publishable_xxx...
```

### 2. å¯åŠ¨æœåŠ¡å™¨

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
cd IdeaCapture/web
./start.sh
```

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨**

```bash
cd IdeaCapture/web

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pip3 install fastapi uvicorn python-dotenv

# å¯åŠ¨æœåŠ¡å™¨
python3 server.py
```

### 3. è®¿é—®ç½‘é¡µ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- **ä¸»é¡µ**: http://localhost:8080
- **API æ–‡æ¡£**: http://localhost:8080/docs

## ğŸ“‹ API ç«¯ç‚¹

### GET `/api/config`

è·å– Supabase é…ç½®ä¿¡æ¯

**å“åº”ç¤ºä¾‹**:
```json
{
  "supabase_url": "https://xxx.supabase.co",
  "supabase_key": "sb_publishable_xxx",
  "configured": true
}
```

### GET `/health`

å¥åº·æ£€æŸ¥ç«¯ç‚¹

**å“åº”ç¤ºä¾‹**:
```json
{
  "status": "healthy",
  "service": "IdeaCapture Web Viewer"
}
```

## ğŸ”§ å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æµè§ˆå™¨         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1. è®¿é—® /
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  server.py      â”‚  æä¾› index.html
â”‚  (FastAPI)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 2. è¯·æ±‚ /api/config
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯»å– .env æ–‡ä»¶  â”‚  SUPABASE_URL
â”‚                 â”‚  SUPABASE_PUBLISHABLE_KEY
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 3. è¿”å›é…ç½®
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æµè§ˆå™¨         â”‚  ä½¿ç”¨é…ç½®ç›´æ¥è®¿é—® Supabase
â”‚                 â”‚  GET /rest/v1/ideas
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” å®‰å…¨è¯´æ˜

### ä¹‹å‰ï¼ˆä¸å®‰å…¨ï¼‰âŒ
- ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ Service Role Key
- æ•æ„Ÿå¯†é’¥å­˜å‚¨åœ¨æµè§ˆå™¨ localStorage
- å¯†é’¥åœ¨ç½‘ç»œä¸­ä¼ è¾“

### ç°åœ¨ï¼ˆå®‰å…¨ï¼‰âœ…
- ä½¿ç”¨ Publishable Keyï¼ˆå®¢æˆ·ç«¯å®‰å…¨å¯†é’¥ï¼‰
- é…ç½®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ç¯å¢ƒå˜é‡
- å¯†é’¥ä¸é€šè¿‡æµè§ˆå™¨ä¼ è¾“
- éµå®ˆ Supabase RLS å®‰å…¨ç­–ç•¥

## ğŸ“ æ–‡ä»¶ç»“æ„

```
web/
â”œâ”€â”€ index.html      # å‰ç«¯é¡µé¢ï¼ˆå·²é‡æ„ï¼Œæ— éœ€è¾“å…¥é…ç½®ï¼‰
â”œâ”€â”€ server.py       # åç«¯æœåŠ¡ï¼ˆæä¾›é…ç½®APIï¼‰
â”œâ”€â”€ start.sh        # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md       # æœ¬æ–‡ä»¶
```

## ğŸ› ï¸ ä¾èµ–é¡¹

- Python 3.7+
- FastAPI
- Uvicorn
- python-dotenv

å®‰è£…å‘½ä»¤ï¼š
```bash
pip3 install fastapi uvicorn python-dotenv
```

## â“ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šé…ç½®åŠ è½½å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: "Supabase é…ç½®æœªè®¾ç½®"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `IdeaCapture/IdeaCapture/.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. ç¡®è®¤æ–‡ä»¶åŒ…å« `SUPABASE_URL` å’Œ `SUPABASE_PUBLISHABLE_KEY`
3. é‡å¯æœåŠ¡å™¨

### é—®é¢˜ï¼šç«¯å£å·²è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**: "Address already in use"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8080

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£ï¼ˆä¿®æ”¹ server.py ä¸­çš„ç«¯å£å·ï¼‰
```

### é—®é¢˜ï¼šæ— æ³•è¿æ¥åˆ° Supabase

**å¯èƒ½åŸå› **:
1. Publishable Key é”™è¯¯
2. Supabase é¡¹ç›®å·²æš‚åœ
3. RLS ç­–ç•¥é˜»æ­¢è®¿é—®

**è§£å†³æ–¹æ¡ˆ**:
1. éªŒè¯ Publishable Key æ˜¯å¦æ­£ç¡®
2. ç™»å½• Supabase Dashboard æ£€æŸ¥é¡¹ç›®çŠ¶æ€
3. æ£€æŸ¥ RLS ç­–ç•¥æ˜¯å¦å…è®¸ SELECT æ“ä½œ

## ğŸ”„ ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»

```
iOS App (IdeaCapture)
    â†“ ä¿å­˜æƒ³æ³•
Supabase Database
    â†‘ è¯»å–æƒ³æ³•
Web Viewer (æœ¬é¡¹ç›®)
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Supabase API Keys](https://supabase.com/docs/guides/api/api-keys)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [ä¸»é¡¹ç›®é‡æ„æ–‡æ¡£](../../SUPABASE_MIGRATION.md)

## ğŸ’¡ æœªæ¥æ”¹è¿›

- [ ] æ·»åŠ æƒ³æ³•ç¼–è¾‘åŠŸèƒ½
- [ ] æ”¯æŒæ‰¹é‡åˆ é™¤
- [ ] å¯¼å‡ºåŠŸèƒ½ï¼ˆCSV, JSONï¼‰
- [ ] å®æ—¶åŒæ­¥ï¼ˆWebSocketï¼‰
- [ ] ç”¨æˆ·è®¤è¯ï¼ˆå¦‚æœéœ€è¦å¤šç”¨æˆ·ï¼‰
- [ ] æ•°æ®å¯è§†åŒ–ï¼ˆå›¾è¡¨ç»Ÿè®¡ï¼‰

## ğŸ“„ è®¸å¯è¯

ä¸ä¸»é¡¹ç›®ç›¸åŒ

---

**æ›´æ–°æ—¥æœŸ**: 2026-01-31
**ç‰ˆæœ¬**: 2.0.0ï¼ˆé‡æ„ç‰ˆï¼‰
**å˜æ›´**: ä»æ‰‹åŠ¨é…ç½®æ”¹ä¸ºè‡ªåŠ¨ä»ç¯å¢ƒå˜é‡è¯»å–
